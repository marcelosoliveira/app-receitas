{"ast":null,"code":"import _defineProperty from\"/home/marcelotryber/projetos/projeto-bloco_19_app-receitas/sd-07-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/marcelotryber/projetos/projeto-bloco_19_app-receitas/sd-07-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/marcelotryber/projetos/projeto-bloco_19_app-receitas/sd-07-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/marcelotryber/projetos/projeto-bloco_19_app-receitas/sd-07-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/marcelotryber/projetos/projeto-bloco_19_app-receitas/sd-07-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import FoodAppContext from'./FoodAppContext';import{mealsAPI,drinksAPI,detailApi}from'../services';function Provider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),mealsData=_useState2[0],setMealsData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),drinksData=_useState4[0],setDrinksData=_useState4[1];var _useState5=useState({term:'',type:''}),_useState6=_slicedToArray(_useState5,2),fields=_useState6[0],setFields=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),detailRecipe=_useState8[0],setDetailRecipe=_useState8[1];var getMealsDrinks=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$mealsAPI,meals,_yield$drinksAPI,drinks;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return mealsAPI(fields.term,fields.type);case 2:_yield$mealsAPI=_context.sent;meals=_yield$mealsAPI.meals;_context.next=6;return drinksAPI(fields.term,fields.type);case 6:_yield$drinksAPI=_context.sent;drinks=_yield$drinksAPI.drinks;setMealsData(meals);setDrinksData(drinks);case 10:case\"end\":return _context.stop();}}},_callee);}));return function getMealsDrinks(){return _ref2.apply(this,arguments);};}();var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showSearch=_useState10[0],setShowSearch=_useState10[1];var handlerChange=function handlerChange(_ref3){var target=_ref3.target;var name=target.name,value=target.value;setFields(_objectSpread(_objectSpread({},fields),{},_defineProperty({},name,value)));};var handlerData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(recipes,match,history,id){var path;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!recipes){alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');}else if(recipes.length===1){path=match.path;history.push(\"\".concat(path,\"/\").concat(recipes[0][id]));}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function handlerData(_x,_x2,_x3,_x4){return _ref4.apply(this,arguments);};}();var handlerClick=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref5,_ref6){var target,match,history,value,term,type,_yield$mealsAPI2,meals,_yield$drinksAPI2,drinks;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:target=_ref5.target;match=_ref6.match,history=_ref6.history;value=target.value;term=fields.term,type=fields.type;if(!(value==='Comidas')){_context3.next=13;break;}_context3.next=7;return mealsAPI(term,type);case 7:_yield$mealsAPI2=_context3.sent;meals=_yield$mealsAPI2.meals;setMealsData(meals);handlerData(meals,match,history,'idMeal');_context3.next=20;break;case 13:if(!(value==='Bebidas')){_context3.next=20;break;}_context3.next=16;return drinksAPI(term,type);case 16:_yield$drinksAPI2=_context3.sent;drinks=_yield$drinksAPI2.drinks;setDrinksData(drinks);handlerData(drinks,match,history,'idDrink');case 20:case\"end\":return _context3.stop();}}},_callee3);}));return function handlerClick(_x5,_x6){return _ref7.apply(this,arguments);};}();var handleClickDetail=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(pathname,id){var detail;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return detailApi(id,pathname);case 2:detail=_context4.sent;setDetailRecipe(detail);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function handleClickDetail(_x7,_x8){return _ref8.apply(this,arguments);};}();useEffect(function(){getMealsDrinks();},[]);var context={fields:fields,drinksData:drinksData,mealsData:mealsData,setMealsData:setMealsData,setDrinksData:setDrinksData,showSearch:showSearch,setShowSearch:setShowSearch,handlerChange:handlerChange,handlerClick:handlerClick,handlerData:handlerData,handleClickDetail:handleClickDetail,detailRecipe:detailRecipe};return/*#__PURE__*/React.createElement(FoodAppContext.Provider,{value:context},children);}Provider.defaultProps={children:{}};export default Provider;","map":{"version":3,"sources":["/home/marcelotryber/projetos/projeto-bloco_19_app-receitas/sd-07-project-recipes-app/src/context/Provider.js"],"names":["React","useEffect","useState","FoodAppContext","mealsAPI","drinksAPI","detailApi","Provider","children","mealsData","setMealsData","drinksData","setDrinksData","term","type","fields","setFields","detailRecipe","setDetailRecipe","getMealsDrinks","meals","drinks","showSearch","setShowSearch","handlerChange","target","name","value","handlerData","recipes","match","history","id","alert","length","path","push","handlerClick","handleClickDetail","pathname","detail","context","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport FoodAppContext from './FoodAppContext';\nimport { mealsAPI, drinksAPI, detailApi } from '../services';\n\nfunction Provider({ children }) {\n  const [mealsData, setMealsData] = useState([]);\n  const [drinksData, setDrinksData] = useState([]);\n  const [fields, setFields] = useState({ term: '', type: '' });\n  const [detailRecipe, setDetailRecipe] = useState({});\n\n  const getMealsDrinks = async () => {\n    const { meals } = await mealsAPI(fields.term, fields.type);\n    const { drinks } = await drinksAPI(fields.term, fields.type);\n    setMealsData(meals);\n    setDrinksData(drinks);\n  };\n\n  const [showSearch, setShowSearch] = useState(false);\n\n  const handlerChange = ({ target }) => {\n    const { name, value } = target;\n    setFields({\n      ...fields,\n      [name]: value,\n    });\n  };\n\n  const handlerData = async (recipes, match, history, id) => {\n    if (!recipes) {\n      alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n    } else if (recipes.length === 1) {\n      const { path } = match;\n      history.push(`${path}/${recipes[0][id]}`);\n    }\n  };\n\n  const handlerClick = async ({ target }, { match, history }) => {\n    const { value } = target;\n    const { term, type } = fields;\n    if (value === 'Comidas') {\n      const { meals } = await mealsAPI(term, type);\n      setMealsData(meals);\n      handlerData(meals, match, history, 'idMeal');\n    } else if (value === 'Bebidas') {\n      const { drinks } = await drinksAPI(term, type);\n      setDrinksData(drinks);\n      handlerData(drinks, match, history, 'idDrink');\n    }\n  };\n\n  const handleClickDetail = async (pathname, id) => {\n    const detail = await detailApi(id, pathname);\n\n    setDetailRecipe(detail);\n  };\n\n  useEffect(() => {\n    getMealsDrinks();\n  }, []);\n\n  const context = {\n    fields,\n    drinksData,\n    mealsData,\n    setMealsData,\n    setDrinksData,\n    showSearch,\n    setShowSearch,\n    handlerChange,\n    handlerClick,\n    handlerData,\n    handleClickDetail,\n    detailRecipe,\n  };\n\n  return (\n    <FoodAppContext.Provider value={ context }>\n      { children}\n    </FoodAppContext.Provider>\n  );\n}\n\nProvider.propTypes = {\n  children: PropTypes.shape({}),\n};\n\nProvider.defaultProps = {\n  children: {},\n};\n\nexport default Provider;\n"]},"metadata":{},"sourceType":"module"}