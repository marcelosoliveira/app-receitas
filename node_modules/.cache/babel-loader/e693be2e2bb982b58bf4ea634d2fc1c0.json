{"ast":null,"code":"import _regeneratorRuntime from\"/home/marcelotryber/projetos/projeto-bloco_19_app-receitas/sd-07-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/marcelotryber/projetos/projeto-bloco_19_app-receitas/sd-07-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/marcelotryber/projetos/projeto-bloco_19_app-receitas/sd-07-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/marcelotryber/projetos/projeto-bloco_19_app-receitas/sd-07-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/marcelotryber/projetos/projeto-bloco_19_app-receitas/sd-07-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useContext,useState}from'react';import FoodAppContext from'../context/FoodAppContext';import{mealsAPI,drinksAPI}from'../services';function useSearch(){var _useContext=useContext(FoodAppContext),setMealsData=_useContext.setMealsData,setDrinksData=_useContext.setDrinksData;var _useState=useState({term:'',type:''}),_useState2=_slicedToArray(_useState,2),fields=_useState2[0],setFields=_useState2[1];var handlerChange=function handlerChange(_ref){var target=_ref.target;var name=target.name,value=target.value;setFields(_objectSpread(_objectSpread({},fields),{},_defineProperty({},name,value)));};var handlerData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(recipes,history,id){var location,pathname;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!recipes){alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');}else if(recipes.length===1){location=history.location;pathname=location.pathname;history.push(\"\".concat(pathname,\"/\").concat(recipes[0][id]));}case 1:case\"end\":return _context.stop();}}},_callee);}));return function handlerData(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();var handlerClick=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3,history){var target,value,term,type,_yield$mealsAPI,meals,_yield$drinksAPI,drinks;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:target=_ref3.target;value=target.value;term=fields.term,type=fields.type;if(!(value==='Comidas')){_context2.next=12;break;}_context2.next=6;return mealsAPI(term,type);case 6:_yield$mealsAPI=_context2.sent;meals=_yield$mealsAPI.meals;setMealsData(meals);handlerData(meals,history,'idMeal');_context2.next=19;break;case 12:if(!(value==='Bebidas')){_context2.next=19;break;}_context2.next=15;return drinksAPI(term,type);case 15:_yield$drinksAPI=_context2.sent;drinks=_yield$drinksAPI.drinks;setDrinksData(drinks);handlerData(drinks,history,'idDrink');case 19:case\"end\":return _context2.stop();}}},_callee2);}));return function handlerClick(_x4,_x5){return _ref4.apply(this,arguments);};}();return[handlerChange,handlerClick];}export default useSearch;","map":{"version":3,"sources":["/home/marcelotryber/projetos/projeto-bloco_19_app-receitas/sd-07-project-recipes-app/src/hooks/useSearch.js"],"names":["useContext","useState","FoodAppContext","mealsAPI","drinksAPI","useSearch","setMealsData","setDrinksData","term","type","fields","setFields","handlerChange","target","name","value","handlerData","recipes","history","id","alert","length","location","pathname","push","handlerClick","meals","drinks"],"mappings":"q/BAAA,OAASA,UAAT,CAAqBC,QAArB,KAAqC,OAArC,CAEA,MAAOC,CAAAA,cAAP,KAA2B,2BAA3B,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,aAApC,CAEA,QAASC,CAAAA,SAAT,EAAqB,iBACqBL,UAAU,CAACE,cAAD,CAD/B,CACXI,YADW,aACXA,YADW,CACGC,aADH,aACGA,aADH,eAESN,QAAQ,CAAC,CAAEO,IAAI,CAAE,EAAR,CAAYC,IAAI,CAAE,EAAlB,CAAD,CAFjB,wCAEZC,MAFY,eAEJC,SAFI,eAInB,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAAgB,IAAbC,CAAAA,MAAa,MAAbA,MAAa,IAC5BC,CAAAA,IAD4B,CACZD,MADY,CAC5BC,IAD4B,CACtBC,KADsB,CACZF,MADY,CACtBE,KADsB,CAEpCJ,SAAS,gCACJD,MADI,wBAENI,IAFM,CAECC,KAFD,GAAT,CAID,CAND,CAQA,GAAMC,CAAAA,WAAW,2FAAG,iBAAOC,OAAP,CAAgBC,OAAhB,CAAyBC,EAAzB,wIAClB,GAAI,CAACF,OAAL,CAAc,CACZG,KAAK,CAAC,kEAAD,CAAL,CACD,CAFD,IAEO,IAAIH,OAAO,CAACI,MAAR,GAAmB,CAAvB,CAA0B,CACvBC,QADuB,CACVJ,OADU,CACvBI,QADuB,CAEvBC,QAFuB,CAEVD,QAFU,CAEvBC,QAFuB,CAG/BL,OAAO,CAACM,IAAR,WAAgBD,QAAhB,aAA4BN,OAAO,CAAC,CAAD,CAAP,CAAWE,EAAX,CAA5B,GACD,CAPiB,sDAAH,kBAAXH,CAAAA,WAAW,qDAAjB,CAUA,GAAMS,CAAAA,YAAY,2FAAG,wBAAmBP,OAAnB,+LAASL,MAAT,OAASA,MAAT,CACXE,KADW,CACDF,MADC,CACXE,KADW,CAEXP,IAFW,CAEIE,MAFJ,CAEXF,IAFW,CAELC,IAFK,CAEIC,MAFJ,CAELD,IAFK,MAGfM,KAAK,GAAK,SAHK,mDAIOZ,CAAAA,QAAQ,CAACK,IAAD,CAAOC,IAAP,CAJf,uCAITiB,KAJS,iBAITA,KAJS,CAKjBpB,YAAY,CAACoB,KAAD,CAAZ,CACAV,WAAW,CAACU,KAAD,CAAQR,OAAR,CAAiB,QAAjB,CAAX,CANiB,qCAORH,KAAK,GAAK,SAPF,oDAQQX,CAAAA,SAAS,CAACI,IAAD,CAAOC,IAAP,CARjB,yCAQTkB,MARS,kBAQTA,MARS,CASjBpB,aAAa,CAACoB,MAAD,CAAb,CACAX,WAAW,CAACW,MAAD,CAAST,OAAT,CAAkB,SAAlB,CAAX,CAViB,yDAAH,kBAAZO,CAAAA,YAAY,kDAAlB,CAcA,MAAO,CAACb,aAAD,CAAgBa,YAAhB,CAAP,CACD,CAED,cAAepB,CAAAA,SAAf","sourcesContent":["import { useContext, useState } from 'react';\n\nimport FoodAppContext from '../context/FoodAppContext';\nimport { mealsAPI, drinksAPI } from '../services';\n\nfunction useSearch() {\n  const { setMealsData, setDrinksData } = useContext(FoodAppContext);\n  const [fields, setFields] = useState({ term: '', type: '' });\n\n  const handlerChange = ({ target }) => {\n    const { name, value } = target;\n    setFields({\n      ...fields,\n      [name]: value,\n    });\n  };\n\n  const handlerData = async (recipes, history, id) => {\n    if (!recipes) {\n      alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n    } else if (recipes.length === 1) {\n      const { location } = history;\n      const { pathname } = location;\n      history.push(`${pathname}/${recipes[0][id]}`);\n    }\n  };\n\n  const handlerClick = async ({ target }, history) => {\n    const { value } = target;\n    const { term, type } = fields;\n    if (value === 'Comidas') {\n      const { meals } = await mealsAPI(term, type);\n      setMealsData(meals);\n      handlerData(meals, history, 'idMeal');\n    } else if (value === 'Bebidas') {\n      const { drinks } = await drinksAPI(term, type);\n      setDrinksData(drinks);\n      handlerData(drinks, history, 'idDrink');\n    }\n  };\n\n  return [handlerChange, handlerClick];\n}\n\nexport default useSearch;\n"]},"metadata":{},"sourceType":"module"}